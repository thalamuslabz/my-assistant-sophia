# Changelog

## [1.2.0] - 2026-01-15
- **Release:** Sophia Assistant v1.2.0 (Persistent & Tracked)
- **Gate 11 Approved:** Release v1.2
  - Persistent encrypted API key storage
  - Usage tracking and cost management
  - All 6 providers ready for production
  - 24 unit tests passing
- **Gate 10:** Usage Tracking & Cost Management
  - Implemented usage tracking database (SQLite)
  - Implemented pricing calculator with real provider pricing
  - Created usage dashboard UI component
  - Automatic token counting and cost estimation
  - Per-provider usage statistics
  - Historical data (24h, 7d, 30d, 90d views)
- **Gate 9:** Provider Testing & Validation
  - Migrated all clients to ureq HTTP client (fixed async panics)
  - Enhanced error handling and logging for all providers
  - Updated to cost-effective models (gpt-4o-mini, claude-3-5-haiku)
  - All 6 providers code-complete and ready
- **Gate 8:** Persistent Storage Implementation
  - Implemented AES-256-GCM encryption for API keys
  - Created encrypted file backend at ~/.sophia/secrets.enc
  - Atomic write operations with backup mechanism
  - File permissions (0600) for security
  - Master key derivation from machine ID
  - 9 crypto/storage unit tests passing
- **Gate 7:** Persistent Storage Architecture
  - Evaluated storage options (keychain vs encrypted file)
  - Designed encryption strategy (AES-256-GCM)
  - Created comprehensive architecture document
  - Security review completed
- **Major Fixes:**
  - ✅ API keys now persist across restarts (v1.1 issue resolved)
  - ✅ No more async runtime panics (HTTP client fixed)
  - ✅ Cost visibility (usage dashboard added)
  - ✅ All providers ready (not just Gemini)

## [1.1.0] - 2026-01-15
- **Release:** Sophia Assistant v1.1.0 (BYOK - Bring Your Own Key)
- **Gate 5 Approved:** Implementation Complete
  - Gemini API integration working (gemini-2.5-flash-lite)
  - Provider registry with Gemini-first priority
  - Settings UI for provider management
  - API key storage via SecretStore
- **Sprint 7:** Secure Storage & Provider Registry
  - Implemented `SecretStore` (in-memory for v1.1, persistent storage planned for v1.2)
  - Implemented `ProviderRegistry` with Gemini-first fallback strategy
  - Implemented provider clients: Gemini (tested), OpenAI, Anthropic, DeepSeek, OpenRouter, Ollama
  - Added provider configuration persistence
- **Sprint 8:** Gemini-First Implementation
  - Modified onboarding wizard to collect Gemini API key
  - Implemented `GeminiClient` with ureq HTTP client
  - Added network egress consent during onboarding
  - Fixed Tauri 2.x camelCase/snake_case parameter conversion
- **Known Issues:**
  - SecretStore uses in-memory storage (keys don't persist across restarts)
  - Workaround: Re-enter API keys after restart
  - Fix planned for v1.2: Encrypted file storage or keyring fix

## [1.0.0] - 2026-01-14
- **Release:** Sophia Assistant v1.0.0 (Local-Only Desktop App)
- Completed Sprint 6: Release Readiness
  - Executed full test suite (`test-evidence/release-candidate/full_suite.txt`)
  - Built production frontend assets
  - Packaged source and documentation for release
  - Finalized Release Checklist and Notes
- Completed Sprint 5: UI Release Checklist
  - Implemented `RuntimeControl` (Pause/Resume button, Status Badge)
  - Implemented `ChatInterface` (History, Input, Error handling)
  - Styled application (Modern, clean CSS)
- Completed Sprint 4: Model Routing v1
  - Implemented `ModelRouter` with Task Taxonomy
  - Implemented `OllamaClient`
  - Implemented Privacy Guardrail
- Completed Sprint 3: Onboarding & Assistant Contract
- Completed Sprint 2: Data & Memory Foundations
- Completed Sprint 1: Core Runtime Skeleton
- Completed Sprint 0: Planning & Scaffolding
  - Implemented Onboarding State Machine (Welcome -> Privacy -> Contract)
  - Implemented `OnboardingManager` in Rust
  - Added "Assistant Contract" verification and persistence logic
  - Created React UI for Onboarding Wizard
  - Verified with unit tests (`test_onboarding_flow`) and evidence
- Completed Sprint 2: Data & Memory Foundations
  - Implemented SQLite storage layer (`sophia.db`)
  - Implemented Versioned Snapshot Store (ACID compliant)
  - Implemented Decision Memory and Preferences
  - Implemented JSON Export (`export_all`)
  - Verified with unit tests and evidence
- Completed Sprint 1: Core Runtime Skeleton
  - Implemented Runtime State Machine (Stopped, Starting, Running, Paused, Error)
  - Implemented JSONL Audit Logging
  - Implemented Runtime Manager with thread-safe state handling
  - Added basic runtime loop scaffold
  - Verified with unit tests and evidence
- Initialized Tauri/React/TypeScript project scaffold
- Created `planning/architecture/SPRINT_1_RUNTIME_DESIGN.md`
- Updated Test Plan for Sprint 1
- Added `AGENTS.md` operational guidelines
- Initial repository scaffolding
- Documentation reorganization under `docs/`
- Sprint plan and gating artifacts
- Test evidence templates and hashing script
